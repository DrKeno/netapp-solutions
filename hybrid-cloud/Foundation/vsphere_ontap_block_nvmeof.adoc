= vSphere VMFS Datastore - Fiber Channel Storage backend with ONTAP
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./../../media/
:author: Suresh Thoppay, TME - Hybrid Cloud Solutions



The steps to provision VMFS datastore involves
* Check compatability with https://mysupport.netapp.com/matrix[Interoperability Matrix Tool (IMT)]

** FC and NVMe/FC 
*** requires FC Switch with N_port ID virtualization (NPIV) feature enabled.
*** Use single-initiator zoning and use WWPNs to specify zone membership.
** FCoE requires DCB capability on switch.
* ONTAP tasks
    . Verify ONTAP feature license for the SAN protocol of your choice.
    . Ensure SAN protocol of your preference is enabled on SVM
    . Ensure Logical Interfaces are available on SVM for the protocol of your choice.
    . Create and Map LUN/Namespace - Skip if using ONTAP tools for VMware vSphere

* Tasks on VMware vSphere
** FC
    . Ensure at least 1 HBA available (2 HBAs preferred for better performance and fault tolerance)
    . Ensure HBA drivers are installed
    . Ensure Fabric Zones are configured
    . ONTAP Tools for VMware vSphere is deployed and registered with vCenter.
    . Provision VMFS datastore with ONTAP Tools.

** FCoE
    . Ensure at least 1 FCoE compatible NIC is available (2 is preferred for fault tolerance)
    . Ensure correct drivers are installed
    . Ensure Fabric zones are configured
    . ONTAP Tools for VMware vSphere is deployed and registered with vCenter.
    . Provision VMFS datastore with ONTAP Tools.

** iSCSI
    . Ensure at least 1 NIC connected to iSCSI VLAN. (Two preferred for better performance and fault tolerance)
    . Ensure iSCSI Software initiator is enabled
    . Ensure TCPIP stack for iSCSI is available.
    . Ensure iSCSI portgroups are available.
    . Ensure iSCSI VMKernel adapters are enabled to match the number of NICs and IP are assigned.
    . Bind iSCSI software adapter to iSCSI VMKernel adapter(s)
    . Provision VMFS datastore with ONTAP Tools.

** NVMe/FC
    . Ensure at least 1 supported HBA available (2 HBAs preferred for better performance and fault tolerance)
    . Ensure HBA drivers are installed
    . Ensure Fabric Zones are configured
    . Get host NQN info and update on NVMe subsystem on ONTAP SVM.
    . ONTAP Tools for VMware vSphere is deployed and registered with vCenter.
    . Provision VMFS datastore with ONTAP Tools.