---
sidebar: sidebar
permalink: hybrid-cloud/foundation/vsphere_ontap_file_nfs.html
keywords: vSphere, datastore, nfs, ONTAP tools, vlan, network interface, service policy, export policy
summary: This page provides steps to deploy a NetApp ONTAP NFS version 3 datastore in a VMware vSphere environment.
---


= vSphere NFS Datastore - Version 4.1 with ONTAP
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./../../media/
:author: Suresh Thoppay, TME - Hybrid Cloud Solutions
:ontap_version: ONTAP 9.8 or above
:vsphere_version: vSphere 7.0 or above


.About this task
Creation of NFS version 4.1 datastore with ONTAP NAS storage. 

For Automated provision, check the following scripts
|===
|<<PowerShell>>|<<Ansible>>|<<Terraform>>
|===


.What you will need

. Basic skill to manage vSphere environment and ONTAP.
. ONTAP Storage System (FAS/AFF/CVO/ONTAP Select/Cloud Volume Service/Azure NetApp Files)
.. Running with {ontap_version}
. ONTAP Credentials (SVM Name, UserID, Password)
. ONTAP Network Port,SVM,LUN Information for NFS
.. link:++https://docs.netapp.com/ontap-9/topic/com.netapp.doc.exp-nfs-vaai/GUID-BBD301EF-496A-4974-B205-5F878E44BF59.html++[Have Completed NFS Configuration Worksheet]
. vCenter Server Credentials
. vSphere Host(s) Information
.. {vsphere_version}
. NFS VMKernel Adapter IP Informattion
. Network Switch(es)
.. with ONTAP System Network Data ports and vSphere hosts are connected
..  VLAN(s) configured for NFS.
.. (Optional) Link aggregation configured for ONTAP Network Data ports.
. ONTAP Tool for VMware vSphere deployed, configured and ready to consume.

.Steps

* Check compatability with https://mysupport.netapp.com/matrix[Interoperability Matrix Tool (IMT)]
** link:++https://docs.netapp.com/ontap-9/topic/com.netapp.doc.exp-nfs-vaai/GUID-DA231492-F8D1-4E1B-A634-79BA906ECE76.html++[Verify NFS configuration is supported]

* Complete ONTAP and vSphere Tasks provided below.

.ONTAP Tasks 

. link:++https://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-cmpr-980/system__license__show.html++[Verify ONTAP license for NFS] 
Use `system license show` command and check nfs is listed.
Use `license add -license-code <license code>` to add license.

. link:++https://docs.netapp.com/ontap-9/topic/com.netapp.doc.pow-nfs-cg/GUID-6D7A1BB1-C672-46EF-B3DC-08EBFDCE1CD5.html++[Follow NFS Configuration Workflow] 


.VMware vSphere Tasks

. link:++https://docs.netapp.com/ontap-9/topic/com.netapp.doc.exp-nfs-vaai/GUID-D78DD9CF-12F2-4C3C-AD3A-002E5D727411.html++[Follow NFS Client Configuration for vSphere Workflow]

.What's next?
Once the tasks are completed, NFS datastore is ready to consume for provisioning virtual machines.

.PowerShell Script
[[PowerShell]]
[source,powershell]
----

----

.Ansible Playbook
[[Ansible]]
[source]
----

----

.Terraform
[[Terraform]]
[source]
----

----